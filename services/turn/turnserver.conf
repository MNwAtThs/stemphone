# Coturn TURN Server Configuration for Stemphone

# Listening port for TURN/STUN
listening-port=3478

# Listening port for TLS/DTLS
tls-listening-port=5349

# Relay ports range
min-port=49152
max-port=65535

# Use fingerprints in TURN messages
fingerprint

# Use long-term credentials mechanism
lt-cred-mech

# Realm for authentication
realm=stemphone.local

# Server name
server-name=stemphone-turn

# Log file path
log-file=/var/log/turnserver.log

# Verbose logging (disable in production)
verbose

# Enable STUN/TURN server
stun-only=0

# Disable UDP relay endpoints
no-udp-relay

# Disable TCP relay endpoints  
no-tcp-relay

# Enable DTLS
no-dtls

# Enable TLS
no-tls

# Mobility with ICE
mobility

# No multicast peers
no-multicast-peers

# No loopback peers
no-loopback-peers

# Secure
secure-stun

# Database for user management (SQLite)
userdb=/var/lib/turn/turndb

# Static user credentials (for development)
# Format: username:password
# In production, use database or external auth
user=stemphone:stemphone123
user=guest:guest123

# Allowed peer IP ranges
allowed-peer-ip=10.0.0.0-10.255.255.255
allowed-peer-ip=192.168.0.0-192.168.255.255
allowed-peer-ip=172.16.0.0-172.31.255.255

# Denied peer IP ranges (RFC1918 private ranges - uncomment if needed)
# denied-peer-ip=10.0.0.0-10.255.255.255
# denied-peer-ip=192.168.0.0-192.168.255.255
# denied-peer-ip=172.16.0.0-172.31.255.255

# External IP (set this to your server's public IP)
# external-ip=YOUR_PUBLIC_IP

# Certificate files for TLS (generate these for production)
# cert=/etc/ssl/certs/turn_server_cert.pem
# pkey=/etc/ssl/private/turn_server_pkey.pem

# Process management
pidfile=/var/run/turnserver.pid

# Run as daemon
no-daemon

# CLI interface
cli-ip=127.0.0.1
cli-port=5766
cli-password=stemphone_cli_password

